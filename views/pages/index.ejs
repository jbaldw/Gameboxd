<!DOCTYPE html>
<html lang="en">
    <head>
        <%- include('../partials/head'); %>
        <link rel="stylesheet" href="/public/styles/homepage.css">
        <script src="/public/scripts/get-10-random-covers.js"></script>
        <script src="/public/scripts/get-game-data.js"></script>
    </head>
    <body class="container">
        <header>
            <%- include('../partials/header'); %>
        </header>

        <main>
            <div class="jumbotron">
                <h1>Gameboxd</h1>
                <p>Welcome to Gameboxd</p>

                <h2 class="center-text">Recent Releases</h2>
                <script>
                    axios.get('/recentlyAdded')
                        .then(response) => {
                            <%- include('../partials/gallery', {data: response}) %>
                        };
                </script>
            </div>
        </main>

        

        <!-- Currently needs to be added on all full pages in views -->
        <script>
            let logoDiv = document.getElementById('logoHandle');
            let homeDiv = document.getElementById('homeHandle');
            let aboutDiv = document.getElementById('aboutHandle');
            let userDiv = document.getElementById('userHandle');

            window.onload = (e) => {
                <% if(uid != -1) { %>
                    logoDiv.setAttribute("href", "/?token=" + "<%- token %>");
                    homeDiv.setAttribute("href", "/?token=" + "<%- token %>");
                    aboutDiv.setAttribute("href", "/about?token=" + "<%- token %>");
                    userDiv.setAttribute("href", "/profile?token=" + "<%- token %>");

                    let galleryItems = document.getElementsByClassName('gallery-item');

                    console.log(galleryItems);

                    for (let i = 0; i < galleryItems.length; i++) {
                        console.log('Loop');
                        let anchor = galleryItems.item(i).firstChild;
                        anchor.setAttribute("href", "/game?token=" + "<%- token %>" + "&ids=" + galleryItems.item(i).getAttribute("game-id"));
                    }

                    console.log('Post Loop');

                    userDiv.innerHTML = "Profile";
                <% } else { %>
                    userDiv.setAttribute("href", "/signin");
                    userDiv.innerHTML = "Sign In";
                <% } %>
            }
        </script>
    </body>
</html>